/giftcards/wallet:
    post:
      tags:
        - GiftCards
      summary: Cria um gift card usando saldo da wallet
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - offer_id
              properties:
                offer_id:
                  type: integer
      responses:
        201:
          description: Gift card criado com sucesso
        400:
          description: Erro de validação ou saldo insuficiente
        404:
          description: Oferta não encontrada

  /giftcards/payment:
    post:
      tags:
        - GiftCards
      summary: Cria um pedido de pagamento externo para compra de gift card
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - offer_id
              properties:
                offer_id:
                  type: integer
      responses:
        201:
          description: Pagamento criado com status pendente
        400:
          description: Erro de validação
        404:
          description: Oferta não encontrada

  /giftcards/activate:
    patch:
      tags:
        - GiftCards
      summary: Ativa um gift card com senha do usuário
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - giftcard_id
                - password
              properties:
                giftcard_id:
                  type: integer
                password:
                  type: string
      responses:
        200:
          description: Cartão ativado
        400:
          description: Requisição inválida
        401:
          description: Senha incorreta ou token inválido

  /giftcards/use:
    patch:
      tags:
        - GiftCards
      summary: Usa parcial ou totalmente o saldo de um gift card
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - giftcard_id
                - amount
              properties:
                giftcard_id:
                  type: integer
                amount:
                  type: number
      responses:
        200:
          description: Cartão usado com sucesso
        400:
          description: Erro de uso

  /giftcards/transfer:
    patch:
      tags:
        - GiftCards
      summary: Transfere um gift card para outro usuário
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - giftcard_id
                - recipient_email
              properties:
                giftcard_id:
                  type: integer
                recipient_email:
                  type: string
      responses:
        200:
          description: Cartão transferido
        400:
          description: Requisição inválida

  /giftcards/refund:
    patch:
      tags:
        - GiftCards
      summary: Reembolsa o saldo restante do gift card para a wallet
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - giftcard_id
              properties:
                giftcard_id:
                  type: integer
      responses:
        200:
          description: Reembolso realizado com sucesso
        400:
          description: Cartão inválido para reembolso

  /giftcards/{id}/logs:
    get:
      tags:
        - GiftCards
      summary: Retorna o histórico de ações do cartão
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Logs retornados com sucesso
        404:
          description: Cartão não encontrado
